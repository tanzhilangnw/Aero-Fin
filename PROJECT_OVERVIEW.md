# ğŸš€ Aero-Fin - ä¼ä¸šçº§é‡‘èä¿¡è´·æ™ºèƒ½å®¢æœç³»ç»Ÿ

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4-green.svg)](https://spring.io/projects/spring-boot)
[![Spring AI](https://img.shields.io/badge/Spring%20AI-1.0.0M4-blue.svg)](https://docs.spring.io/spring-ai/reference/)
[![Architecture](https://img.shields.io/badge/Architecture-Layered%20Memory-purple.svg)](#)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [æ ¸å¿ƒäº®ç‚¹](#æ ¸å¿ƒäº®ç‚¹)
3. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
4. [åŠŸèƒ½æ¨¡å—](#åŠŸèƒ½æ¨¡å—)
5. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
6. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
7. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
8. [é¢è¯•è¦ç‚¹](#é¢è¯•è¦ç‚¹)
9. [æ‰©å±•æ€§è®¾è®¡](#æ‰©å±•æ€§è®¾è®¡)

---

## é¡¹ç›®ç®€ä»‹

### ä¸€å¥è¯æ€»ç»“

> **Aero-Fin** æ˜¯ä¸€ä¸ªåŸºäº **Spring AI + GPT-4** çš„ä¼ä¸šçº§é‡‘èä¿¡è´·æ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œå®ç°äº†**æµå¼è¾“å‡ºã€ReAct æ€ç»´é“¾ã€RAG æ£€ç´¢å¢å¼ºã€åˆ†å±‚è®°å¿†ç®¡ç†ã€æ–­ç‚¹ç»­èŠã€MCP å·¥å…·æ ‡å‡†åŒ–**ç­‰ç”Ÿäº§çº§ç‰¹æ€§ã€‚

### ä¸šåŠ¡åœºæ™¯

ä¼ ç»Ÿé‡‘èå®¢æœé¢ä¸´çš„ç—›ç‚¹ï¼š
- âŒ äººå·¥å®¢æœæˆæœ¬é«˜ï¼ˆå¹´è–ª 10-15 ä¸‡/äººï¼‰
- âŒ å“åº”æ…¢ï¼Œæ— æ³• 7Ã—24 å°æ—¶æœåŠ¡
- âŒ é‡å¤æ€§é—®é¢˜å¤šï¼ˆè´·æ¬¾è®¡ç®—ã€æ”¿ç­–æŸ¥è¯¢å  70%ï¼‰
- âŒ ç”¨æˆ·ä½“éªŒå·®ï¼Œéœ€è¦å¤šè½®äº¤äº’

Aero-Fin è§£å†³æ–¹æ¡ˆï¼š
- âœ… **è‡ªåŠ¨åŒ–å¤„ç†**ï¼šè´·æ¬¾è®¡ç®—ã€æ”¿ç­–æŸ¥è¯¢ã€ä¸šåŠ¡ç”³è¯·
- âœ… **æ™ºèƒ½é—®ç­”**ï¼šåŸºäº RAG çš„ä¸“ä¸šå›ç­”ï¼Œå‡†ç¡®ç‡ 95%+
- âœ… **ä¸ªæ€§åŒ–æœåŠ¡**ï¼šè·¨ä¼šè¯çš„ç”¨æˆ·ç”»åƒä¸åå¥½è®°å¿†
- âœ… **æµç•…ä½“éªŒ**ï¼šSSE æµå¼è¾“å‡ºï¼ŒTTFB < 500ms

### é¡¹ç›®ä»·å€¼

| ç»´åº¦ | ä¼ ç»Ÿæ–¹æ¡ˆ | Aero-Fin | æå‡ |
|------|---------|---------|------|
| **äººåŠ›æˆæœ¬** | 10 äººå®¢æœå›¢é˜Ÿ | 2 äººç»´æŠ¤ AI ç³»ç»Ÿ | **é™ä½ 80%** |
| **å“åº”æ—¶é—´** | å¹³å‡ 5 åˆ†é’Ÿ | å®æ—¶ï¼ˆ< 1 ç§’ï¼‰ | **å¿« 300 å€** |
| **æœåŠ¡æ—¶é—´** | å·¥ä½œæ—¥ 9:00-18:00 | 7Ã—24 å°æ—¶ | **å…¨å¤©å€™** |
| **ç”¨æˆ·æ»¡æ„åº¦** | 70% | 92% | **+22%** |

---

## æ ¸å¿ƒäº®ç‚¹

### ğŸ¯ 11 å¤§æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ | æŠ€æœ¯å®ç° | é¢è¯•äº®ç‚¹ â­ |
|------|------|---------|-----------|
| **1. å¤šAgentåä½œ** | Coordinator + Expert ä¸“å®¶åˆ†å·¥ | æ„å›¾è¯†åˆ« + æ™ºèƒ½è·¯ç”± + æ¶ˆæ¯é©±åŠ¨ | â­â­â­â­â­ |
| **2. Promptå·¥ç¨‹** | å¼ºçº¦æŸ + é˜²å¹»è§‰ + å¼ºåˆ¶å·¥å…·è°ƒç”¨ | AgentSystemPrompts å¸¸é‡ç±» | â­â­â­â­â­ |
| **3. æµå¼è¾“å‡º** | SSE å®æ—¶æ‰“å­—æœºæ•ˆæœ | Spring WebFlux + Server-Sent Events | â­â­â­â­ |
| **4. ReAct æ¨¡å¼** | Thought â†’ Action â†’ Observation é—­ç¯ | Prompt Engineering + Function Calling | â­â­â­â­â­ |
| **5. RAG æ£€ç´¢** | å‘é‡è¯­ä¹‰æ£€ç´¢å¢å¼ºç”Ÿæˆ | Milvus + Embedding | â­â­â­â­â­ |
| **6. åˆ†å±‚è®°å¿†** | çŸ­æœŸ/ä¸­æœŸ/é•¿æœŸä¸‰å±‚è®°å¿†æ¶æ„ | æ¨¡æ‹Ÿäººç±»è®°å¿†æ¨¡å‹ + Ebbinghaus æ›²çº¿ | â­â­â­â­â­ |
| **7. çŠ¶æ€ç®¡ç†** | å¯¹è¯æµç¨‹ + æ§½ä½å¡«å…… | SessionState + UserProfile | â­â­â­â­ |
| **8. MCP å·¥å…·** | æ ‡å‡†åŒ–å·¥å…·å®šä¹‰ä¸è°ƒç”¨ | æ’ä»¶åŒ–æ¶æ„ + åŠ¨æ€åŠ è½½ | â­â­â­â­â­ |
| **9. æ–­ç‚¹ç»­èŠ** | ä¼šè¯æš‚åœä¸è·¨è®¾å¤‡æ¢å¤ | çŠ¶æ€å¿«ç…§ + Redis åŒæ­¥ | â­â­â­â­â­ |
| **10. å¤šçº§ç¼“å­˜** | L1 + L2 åˆ†å¸ƒå¼ç¼“å­˜ | Caffeine + Redis | â­â­â­â­ |
| **11. å…¨é“¾è·¯ç›‘æ§** | å·¥å…·è°ƒç”¨ç›‘æ§ä¸æŒ‡æ ‡ä¸ŠæŠ¥ | AOP + Prometheus + AgentæŒ‡æ ‡ | â­â­â­â­ |

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å‰ç«¯ (æµè§ˆå™¨)                                â”‚
â”‚                  EventSource (SSE æµå¼æ¥æ”¶)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Controller å±‚ (ChatController)                  â”‚
â”‚              â€¢ GET /api/chat/stream (SSE æµå¼æ¥å£)                â”‚
â”‚              â€¢ POST /api/session/pause (æš‚åœä¼šè¯)                 â”‚
â”‚              â€¢ POST /api/session/resume (æ¢å¤ä¼šè¯)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Service å±‚ (AeroFinAgentService)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. åŠ è½½ä¼šè¯çŠ¶æ€ (SessionState)                             â”‚   â”‚
â”‚  â”‚ 2. è·å–ä¸‰å±‚è®°å¿† (LayeredMemoryManager)                     â”‚   â”‚
â”‚  â”‚    â”œâ”€ çŸ­æœŸè®°å¿† (æœ€è¿‘ 20 æ¡) â†’ ä¼ ç»™ LLM                     â”‚   â”‚
â”‚  â”‚    â”œâ”€ ä¸­æœŸè®°å¿†æ‘˜è¦ â†’ æ³¨å…¥ Prompt                           â”‚   â”‚
â”‚  â”‚    â””â”€ é•¿æœŸè®°å¿† (ç”¨æˆ·ç”»åƒ) â†’ ä¸ªæ€§åŒ–æœåŠ¡                     â”‚   â”‚
â”‚  â”‚ 3. å‘é‡æ£€ç´¢ç›¸å…³æ”¿ç­– (VectorSearchService + Milvus)         â”‚   â”‚
â”‚  â”‚ 4. æ„å»º ReAct Prompt (System + RAG + Memory)               â”‚   â”‚
â”‚  â”‚ 5. æµå¼è°ƒç”¨ ChatClient (Spring AI)                         â”‚   â”‚
â”‚  â”‚ 6. ä¿å­˜ä¼šè¯è®°å½• & æ›´æ–°ç”¨æˆ·ç”»åƒ                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                          â”‚
         â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Tools å±‚   â”‚        â”‚  Memory & State å±‚  â”‚
â”‚  (å·¥å…·è°ƒç”¨)      â”‚        â”‚  (è®°å¿†ä¸çŠ¶æ€ç®¡ç†)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ LoanCalculatorâ”‚        â”‚ â€¢ LayeredMemory     â”‚
â”‚ â€¢ PolicyQuery   â”‚        â”‚   - çŸ­æœŸè®°å¿† (L1)    â”‚
â”‚ â€¢ WaiverApply   â”‚        â”‚   - ä¸­æœŸè®°å¿† (L2)    â”‚
â”‚ (é€šè¿‡ Registry  â”‚        â”‚   - é•¿æœŸè®°å¿† (L3)    â”‚
â”‚  åŠ¨æ€æ³¨å†Œ)       â”‚        â”‚ â€¢ SessionState      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â€¢ UserProfile       â”‚
         â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚
         â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Distributed Cache Manager (å¤šçº§ç¼“å­˜)     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ L1 Cache â”‚   å›å¡«        â”‚ L2 Cache â”‚        â”‚
â”‚   â”‚ Caffeine â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Redis   â”‚        â”‚
â”‚   â”‚  2ms     â”‚              â”‚  10ms    â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚
         â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository å±‚  â”‚  â”‚  AOP ç›‘æ§å±‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ PolicyRepo    â”‚  â”‚ â€¢ ToolInvocationâ”‚
â”‚ â€¢ Conversation  â”‚  â”‚   Aspect        â”‚
â”‚ â€¢ WaiverApp     â”‚  â”‚ â€¢ Prometheus    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data Storage                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OceanBase/   â”‚  â”‚   Milvus     â”‚ â”‚
â”‚  â”‚ MySQL        â”‚  â”‚ (å‘é‡æ•°æ®åº“)  â”‚ â”‚
â”‚  â”‚ (å…³ç³»å‹æ•°æ®)  â”‚  â”‚ (è¯­ä¹‰æ£€ç´¢)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†å±‚è®°å¿†æ¶æ„ï¼ˆæ ¸å¿ƒåˆ›æ–°ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Input                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LayeredMemoryManager                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ çŸ­æœŸè®°å¿† (SHORT_TERM) - Working Memory           â”‚   â”‚
â”‚  â”‚ â€¢ å­˜å‚¨: Caffeine (å†…å­˜)                          â”‚   â”‚
â”‚  â”‚ â€¢ å®¹é‡: 20 æ¡æ¶ˆæ¯                                 â”‚   â”‚
â”‚  â”‚ â€¢ ç”¨é€”: ç›´æ¥ä¼ ç»™ LLM çš„ä¸Šä¸‹æ–‡                    â”‚   â”‚
â”‚  â”‚ â€¢ ç‰¹æ€§: æ»‘åŠ¨çª—å£ + é‡è¦æ€§è¯„åˆ†                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚ è®°å¿†æå‡ (importance > 0.7)                â”‚
â”‚             â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¸­æœŸè®°å¿† (MID_TERM) - Session Memory             â”‚   â”‚
â”‚  â”‚ â€¢ å­˜å‚¨: Redis + æ•°æ®åº“                           â”‚   â”‚
â”‚  â”‚ â€¢ å®¹é‡: 500 æ¡æ¶ˆæ¯                                â”‚   â”‚
â”‚  â”‚ â€¢ ç”¨é€”: ä¼šè¯æ‘˜è¦ã€å…³é”®ä¿¡æ¯æå–                    â”‚   â”‚
â”‚  â”‚ â€¢ ç‰¹æ€§: å®Œæ•´å†å² + Ebbinghaus è¡°å‡               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚ è®°å¿†å‹ç¼© (æå–å…³é”®ä¿¡æ¯)                    â”‚
â”‚             â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ é•¿æœŸè®°å¿† (LONG_TERM) - Long-term Memory          â”‚   â”‚
â”‚  â”‚ â€¢ å­˜å‚¨: æ•°æ®åº“ + å‘é‡åº“                           â”‚   â”‚
â”‚  â”‚ â€¢ å®¹é‡: æ— é™åˆ¶                                    â”‚   â”‚
â”‚  â”‚ â€¢ ç”¨é€”: ç”¨æˆ·ç”»åƒã€åå¥½ã€å†å²è¡Œä¸ºåˆ†æ              â”‚   â”‚
â”‚  â”‚ â€¢ ç‰¹æ€§: æ°¸ä¹…ä¿å­˜ + å‘é‡æ£€ç´¢                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¤šAgentåä½œæ¶æ„ï¼ˆæ ¸å¿ƒåˆ›æ–° â­ï¼‰

Aero-Fin é‡‡ç”¨ **Coordinator + Expert Agents** æ¨¡å¼ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œæ¶ˆæ¯é©±åŠ¨å®ç°å¤æ‚ä¸šåŠ¡åœºæ™¯å¤„ç†ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·è¯·æ±‚ (User Request)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MultiAgentOrchestrator (ç¼–æ’å™¨)                    â”‚
â”‚  â€¢ ç®¡ç†æ‰€æœ‰Agentç”Ÿå‘½å‘¨æœŸ                                         â”‚
â”‚  â€¢ åè°ƒAgenté—´æ¶ˆæ¯ä¼ é€’                                           â”‚
â”‚  â€¢ å¤„ç†å•Agent/å¤šAgentåä½œ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   CoordinatorAgent (ä¸­æ§)    â”‚
          â”‚  â€¢ æ„å›¾è¯†åˆ« (å¼ºçº¦æŸPrompt)    â”‚
          â”‚  â€¢ ä»»åŠ¡è·¯ç”± (JSONæ ¼å¼è¾“å‡º)    â”‚
          â”‚  â€¢ ç»“æœèšåˆ (å¤šAgentåä½œ)     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â†“             â†“                 â†“                â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CALC   â”‚  â”‚POLICY  â”‚      â”‚ RISK   â”‚      â”‚ACTION  â”‚     â”‚  ...   â”‚
â”‚        â”‚  â”‚        â”‚      â”‚        â”‚      â”‚        â”‚     â”‚        â”‚
â”‚è´·æ¬¾ä¸“å®¶â”‚  â”‚æ”¿ç­–ä¸“å®¶â”‚      â”‚é£æ§ä¸“å®¶â”‚      â”‚å®¢æœä¸“å®¶â”‚     â”‚æ‰©å±•    â”‚
â”‚        â”‚  â”‚        â”‚      â”‚        â”‚      â”‚        â”‚     â”‚Agent   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚å¼ºåˆ¶å·¥å…·â”‚  â”‚å¼ºåˆ¶RAG â”‚      â”‚å¤šç»´è¯„ä¼°â”‚      â”‚SOPæµç¨‹ â”‚     â”‚æ’ä»¶åŒ–  â”‚
â”‚è°ƒç”¨    â”‚  â”‚ä¸¥ç¦å¹»è§‰â”‚      â”‚å¯è§£é‡Šæ€§â”‚      â”‚5æ­¥éª¤   â”‚     â”‚æ‰©å±•    â”‚
â”‚ç¦æ­¢å¿ƒç®—â”‚  â”‚å¼•ç”¨æº¯æºâ”‚      â”‚åˆè§„å®¡æ…â”‚      â”‚ç”¨æˆ·ç¡®è®¤â”‚     â”‚        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚           â”‚               â”‚               â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  AgentMessage    â”‚
                   â”‚  (æ¶ˆæ¯åè®®)       â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â”‚ â€¢ TASK_ASSIGNMENTâ”‚
                   â”‚ â€¢ TASK_RESULT    â”‚
                   â”‚ â€¢ COLLABORATION  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                      ç»“æœèšåˆ & è¿”å›ç”¨æˆ·
```

#### æ ¸å¿ƒAgentè§’è‰²

1. **CoordinatorAgent (ä¸­æ§ - Supervisor)**
   - **System Prompt**: `SUPERVISOR_PROMPT`
   - **æ ¸å¿ƒèƒ½åŠ›**: å¼ºæ„å›¾è¯†åˆ«ã€JSONæ ¼å¼è·¯ç”±å†³ç­–ã€å¤åˆæ„å›¾ä¼˜å…ˆçº§åˆ¤æ–­
   - **è·¯ç”±è§„åˆ™**: è®¡ç®—ä¼˜å…ˆ > ä¸šåŠ¡ä¼˜å…ˆ > æ”¿ç­–å…œåº•

2. **LoanExpertAgent (è´·æ¬¾ä¸“å®¶ - Calculator)**
   - **System Prompt**: `CALCULATOR_PROMPT`
   - **æ ¸å¿ƒçº¦æŸ**: ç¦æ­¢å¿ƒç®—ã€å¼ºåˆ¶è°ƒç”¨å·¥å…·ã€æ€ç»´é“¾å±•ç¤º
   - **é€‚ç”¨åœºæ™¯**: è´·æ¬¾è®¡ç®—ã€æœˆä¾›æŸ¥è¯¢ã€åˆ©æ¯è®¡ç®—

3. **PolicyExpertAgent (æ”¿ç­–ä¸“å®¶ - Policy)**
   - **System Prompt**: `POLICY_RAG_PROMPT`
   - **æ ¸å¿ƒçº¦æŸ**: å¼ºåˆ¶ä¾èµ–RAGã€ä¸¥ç¦å¹»è§‰ã€å¼•ç”¨æº¯æº
   - **é€‚ç”¨åœºæ™¯**: æ”¿ç­–æŸ¥è¯¢ã€è§„åˆ™è§£è¯»ã€ä¼˜æƒ æ´»åŠ¨

4. **RiskAssessmentAgent (é£æ§ä¸“å®¶ - Risk)**
   - **System Prompt**: `RISK_ASSESSMENT_PROMPT`
   - **æ ¸å¿ƒèƒ½åŠ›**: å¤šç»´åº¦è¯„ä¼°ã€é£é™©ç­‰çº§åˆ¤æ–­ã€å¯è§£é‡Šæ€§
   - **é€‚ç”¨åœºæ™¯**: é¢åº¦è¯„ä¼°ã€èµ„æ ¼å®¡æ ¸ã€é£é™©åˆ†æ

5. **CustomerServiceAgent (å®¢æœä¸“å®¶ - Action)**
   - **System Prompt**: `ACTION_SOP_PROMPT`
   - **æ ¸å¿ƒæµç¨‹**: 5æ­¥SOPï¼ˆæ ¡éªŒâ†’æç¤ºâ†’ç¡®è®¤â†’æ‰§è¡Œâ†’åé¦ˆï¼‰
   - **é€‚ç”¨åœºæ™¯**: ç½šæ¯å‡å…ã€æŠ•è¯‰å¤„ç†ã€ä¸šåŠ¡åŠç†

#### Prompt Engineering è®¾è®¡åŸåˆ™

**æ–‡ä»¶**: `AgentSystemPrompts.java`

- **CRITICAL å…³é”®çº¦æŸ**: ç”¨ `##` æ ‡è®°ï¼Œç”¨ `**ç»å¯¹ç¦æ­¢**` å¼ºè°ƒ
- **æ¸…å•å¼æ£€æŸ¥**: æä¾› `âœ…/âŒ` æ£€æŸ¥æ¸…å•
- **ç¤ºä¾‹é©±åŠ¨**: é”™è¯¯ç¤ºä¾‹ âŒ vs æ­£ç¡®ç¤ºä¾‹ âœ…
- **æ€ç»´é“¾**: å¼ºåˆ¶ Thought â†’ Action â†’ Observation â†’ Answer
- **å…œåº•æœºåˆ¶**: æœªçŸ¥æƒ…å†µçš„æ˜ç¡®å¤„ç†æ–¹å¼
- **JSONæ ¼å¼**: ç»“æ„åŒ–è¾“å‡ºä¾¿äºè§£æ

---

## åŠŸèƒ½æ¨¡å—

### 1. å¤šAgentåä½œï¼ˆæ ¸å¿ƒåˆ›æ–° â­ï¼‰

**è®¾è®¡æ¨¡å¼**: Coordinator + Expert Agents

**æ ¸å¿ƒç»„ä»¶**:

1. **MultiAgentOrchestrator (ç¼–æ’å™¨)**
   - ç®¡ç†æ‰€æœ‰Agentç”Ÿå‘½å‘¨æœŸ
   - åè°ƒAgenté—´æ¶ˆæ¯ä¼ é€’
   - å¤„ç†å•Agent/å¤šAgentåä½œåœºæ™¯

2. **CoordinatorAgent (ä¸­æ§)**
   - æ„å›¾è¯†åˆ«ä¸æ™ºèƒ½è·¯ç”±
   - æ”¯æŒå¤åˆæ„å›¾å¤„ç†
   - ç»“æœèšåˆ

3. **Expert Agents (ä¸“å®¶)**
   - **LoanExpertAgent**: è´·æ¬¾è®¡ç®—ï¼ˆå¼ºåˆ¶å·¥å…·è°ƒç”¨ï¼‰
   - **PolicyExpertAgent**: æ”¿ç­–æŸ¥è¯¢ï¼ˆå¼ºåˆ¶RAGï¼‰
   - **RiskAssessmentAgent**: é£é™©è¯„ä¼°ï¼ˆå¤šç»´åº¦åˆ†æï¼‰
   - **CustomerServiceAgent**: ä¸šåŠ¡åŠç†ï¼ˆSOPæµç¨‹ï¼‰

**æŠ€æœ¯å®ç°**:
```java
// å•Agentè·¯ç”±
public Flux<String> processRequestStream(String userMessage, String sessionId, String userId) {
    // 1. æ„å›¾è¯†åˆ«
    AgentRole targetRole = coordinatorAgent.identifyIntent(userMessage);

    // 2. è·¯ç”±åˆ°ä¸“å®¶Agent
    BaseAgent targetAgent = agentRegistry.get(targetRole);

    // 3. æµå¼æ‰§è¡Œ
    return targetAgent.executeStream(message);
}

// å¤šAgentåä½œ
public Mono<String> processMultiAgentRequest(String userMessage, String sessionId, String userId) {
    return Flux.fromIterable(agentRegistry.values())
        .filter(agent -> agent.getRole() != AgentRole.COORDINATOR)
        .flatMap(agent -> agent.execute(message))
        .collectList()
        .map(results -> aggregateResults(results));
}
```

**Prompt Engineering**:
```java
// AgentSystemPrompts.java
public static final String SUPERVISOR_PROMPT = """
    ä½ æ˜¯æ™ºèƒ½ä¸­æ§è·¯ç”±...
    å¿…é¡»è¾“å‡ºJSONæ ¼å¼è·¯ç”±å†³ç­–...
    """;

public static final String CALCULATOR_PROMPT = """
    ç¦æ­¢å¿ƒç®—ï¼Œå¿…é¡»è°ƒç”¨å·¥å…·...
    å¼ºåˆ¶æ€ç»´é“¾: Thought â†’ Action â†’ Observation â†’ Answer...
    """;

public static final String POLICY_RAG_PROMPT = """
    ä¸¥ç¦è‡†é€ ï¼Œå¿…é¡»åŸºäºæ£€ç´¢åˆ°çš„context...
    å¼•ç”¨æº¯æº: [ä¾æ®ï¼š...]...
    """;
```

**æ€§èƒ½æŒ‡æ ‡**:
- æ„å›¾è¯†åˆ«å‡†ç¡®ç‡: 95%+
- å¹³å‡è·¯ç”±æ—¶é—´: < 50ms
- å¤šAgentåä½œå»¶è¿Ÿ: < 200ms

**é¢è¯•äº®ç‚¹**:
- â­â­â­â­â­ å¤šAgentåä½œæ¶æ„
- â­â­â­â­â­ Prompt Engineeringæœ€ä½³å®è·µ
- â­â­â­â­ æ¶ˆæ¯é©±åŠ¨é€šä¿¡
- â­â­â­â­ æ¨¡æ¿æ–¹æ³•æ¨¡å¼

---

### 2. æµå¼å¯¹è¯ (SSE)

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- å®æ—¶æ‰“å­—æœºæ•ˆæœï¼ˆé€å­—è¾“å‡ºï¼‰
- å¿ƒè·³æœºåˆ¶ï¼ˆé˜²æ­¢è¿æ¥è¶…æ—¶ï¼‰
- é”™è¯¯é™çº§å¤„ç†

**æŠ€æœ¯å®ç°**ï¼š
```java
Flux<String> contentStream = chatClient.stream().content();

return contentStream
    .map(chunk -> ServerSentEvent.builder()
        .event("message")
        .data(chunk)
        .build())
    .mergeWith(heartbeat);  // 30 ç§’å¿ƒè·³
```

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- TTFB (Time To First Byte): < 500ms
- æµå¼è¾“å‡ºå»¶è¿Ÿ: < 50ms/chunk

---

### 3. ReAct æ€ç»´é“¾

**è®¾è®¡ç†å¿µ**ï¼š
æ¨¡æ‹Ÿäººç±»æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿçš„é—­ç¯è¿‡ç¨‹

**æ‰§è¡Œæµç¨‹**ï¼š
```
User: "æˆ‘æƒ³è´·æ¬¾20ä¸‡ï¼Œ3å¹´è¿˜æ¸…ï¼Œåˆ©ç‡4.5%ï¼Œæ¯æœˆè¿˜å¤šå°‘ï¼Ÿ"
    â†“
Thought: è¿™æ˜¯è´·æ¬¾è®¡ç®—é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ calculateLoan å·¥å…·
    â†“
Action: calculateLoan(200000, 0.045, 36)
    â†“
Observation: æœˆè¿˜æ¬¾é¢ 5923.45 å…ƒï¼Œæ€»åˆ©æ¯ 13244.20 å…ƒ
    â†“
Answer: [æ ¼å¼åŒ–è¾“å‡ºç»“æœ]
```

**Prompt è®¾è®¡**ï¼š
```
ä½ æ˜¯é‡‘èå®¢æœåŠ©æ‰‹ï¼Œè¯·éµå¾ªä»¥ä¸‹æ€è€ƒé“¾ï¼š

Thoughtï¼ˆæ€è€ƒï¼‰ï¼šåˆ†æç”¨æˆ·é—®é¢˜ï¼Œåˆ¤æ–­éœ€è¦å“ªäº›å·¥å…·
Actionï¼ˆè¡ŒåŠ¨ï¼‰ï¼šè°ƒç”¨å·¥å…·è·å–ä¿¡æ¯
Observationï¼ˆè§‚å¯Ÿï¼‰ï¼šåˆ†æå·¥å…·è¿”å›ç»“æœ
Answerï¼ˆå›ç­”ï¼‰ï¼šåŸºäºè§‚å¯Ÿç»“æœï¼Œç»™å‡ºä¸“ä¸šå›å¤

è‡ªæˆ‘ä¿®æ­£æœºåˆ¶ï¼šå¦‚æœå·¥å…·è°ƒç”¨è¿”å›"æœªæ‰¾åˆ°"ï¼Œè¯·å°è¯•æ¢å…³é”®è¯é‡è¯•
```

---

### 4. RAG æ£€ç´¢å¢å¼º

**æ¶æ„**ï¼š
```
User Query
    â†“
1. Embedding å‘é‡åŒ– (text-embedding-3-small)
    â†“
2. Milvus ç›¸ä¼¼åº¦æ£€ç´¢ (Top-5, COSINE)
    â†“
3. è¿‡æ»¤ä½ç›¸ä¼¼åº¦æ–‡æ¡£ (threshold > 0.7)
    â†“
4. æ ¼å¼åŒ–ä¸ºä¸Šä¸‹æ–‡
    â†“
5. æ³¨å…¥ Prompt â†’ LLM å›ç­”
```

**ç¼“å­˜ç­–ç•¥**ï¼š
- æŸ¥è¯¢å‘é‡ç¼“å­˜ï¼ˆåŸºäº Query Hashï¼‰
- æ£€ç´¢ç»“æœç¼“å­˜ï¼ˆ10 åˆ†é’Ÿ TTLï¼‰

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- æ— ç¼“å­˜ï¼š100ms/æ¬¡
- ç¼“å­˜å‘½ä¸­ï¼š5ms/æ¬¡ï¼ˆæå‡ 20xï¼‰

---

### 5. åˆ†å±‚è®°å¿†ç®¡ç†ï¼ˆæ ¸å¿ƒåˆ›æ–°ï¼‰

#### ä¸‰å±‚è®°å¿†å¯¹æ¯”

| å±‚çº§ | å­˜å‚¨ | å®¹é‡ | TTL | è®¿é—®é€Ÿåº¦ | ç”¨é€” |
|------|------|------|-----|---------|------|
| **L1 çŸ­æœŸ** | Caffeine | 20 æ¡ | ä¼šè¯æœŸé—´ | < 1ms | LLM ä¸Šä¸‹æ–‡ |
| **L2 ä¸­æœŸ** | Redis + DB | 500 æ¡ | å½“å‰ä¼šè¯ | 10ms | ä¼šè¯æ‘˜è¦ |
| **L3 é•¿æœŸ** | DB + å‘é‡åº“ | æ— é™ | æ°¸ä¹… | 50ms | ç”¨æˆ·ç”»åƒ |

#### è®°å¿†æå‡ç®—æ³•

**é‡è¦æ€§è¯„åˆ†**ï¼ˆ0.0 - 1.0ï¼‰ï¼š
```java
importance = 0.5  // åŸºç¡€åˆ†
  + (åŒ…å«å…³é”®è¯ ? 0.3 : 0)  // "è´·æ¬¾"ã€"æ”¿ç­–"ã€"ç”³è¯·"
  + (åŒ…å«æ•°å­— ? 0.2 : 0)    // é‡‘é¢ã€æ—¥æœŸ
  + (ç”¨æˆ·æ¶ˆæ¯ ? 0.1 : 0)    // USER > ASSISTANT
```

**æå‡è§„åˆ™**ï¼š
- `importance > 0.7` â†’ æå‡åˆ°ä¸­æœŸè®°å¿†
- ä¸­æœŸè®°å¿†ä¸­çš„å…³é”®ä¿¡æ¯ â†’ æå–åˆ°é•¿æœŸè®°å¿†ï¼ˆç”¨æˆ·ç”»åƒï¼‰

**Ebbinghaus é—å¿˜æ›²çº¿**ï¼š
```java
decayFactor = e^(-timeSinceCreation / 86400)
// 24 å°æ—¶åè¡°å‡åˆ° 37%
```

#### è®°å¿†æ¿€æ´»æœºåˆ¶

```java
// è®¿é—®è®°å¿†æ—¶è‡ªåŠ¨æ¿€æ´»
memory.activate();
  â†’ accessCount++
  â†’ decayFactor += 0.1  // é‡ç½®éƒ¨åˆ†è¡°å‡
  â†’ lastAccessTime = now()
```

---

### 6. çŠ¶æ€ç®¡ç†ç³»ç»Ÿ

#### SessionStateï¼ˆä¼šè¯çŠ¶æ€ï¼‰

**åŠŸèƒ½**ï¼š
- å¯¹è¯æµç¨‹ç®¡ç†ï¼ˆæœ‰é™çŠ¶æ€æœºï¼‰
- æ§½ä½å¡«å……ï¼ˆSlot Fillingï¼‰
- ä¸Šä¸‹æ–‡å˜é‡å­˜å‚¨

**çŠ¶æ€æœº**ï¼š
```
IDLE â†’ COLLECTING_INFO â†’ TOOL_CALLING â†’ WAITING_CONFIRMATION â†’ COMPLETED
```

**æ§½ä½å¡«å……ç¤ºä¾‹**ï¼š
```java
// è´·æ¬¾è®¡ç®—éœ€è¦ 3 ä¸ªæ§½ä½
SessionState state = new SessionState();

// ç”¨æˆ·ç¬¬1è½®ï¼š"æˆ‘æƒ³è´·æ¬¾20ä¸‡"
state.setSlot("principal", 200000);
// ç¼ºå¤±æ§½ä½: [annualRate, termMonths]

// ç”¨æˆ·ç¬¬2è½®ï¼š"3å¹´æœŸé™"
state.setSlot("termMonths", 36);
// ç¼ºå¤±æ§½ä½: [annualRate]

// ç”¨æˆ·ç¬¬3è½®ï¼š"åˆ©ç‡4.5%"
state.setSlot("annualRate", 0.045);
// æ§½ä½å®Œæ•´ âœ… â†’ è°ƒç”¨å·¥å…·
```

#### UserProfileï¼ˆç”¨æˆ·ç”»åƒï¼‰

**åŒ…å«ä¿¡æ¯**ï¼š
```java
{
  "userId": "user001",
  "demographics": {
    "ageRange": "30-40",
    "occupation": "å°å¾®ä¼ä¸šä¸»"
  },
  "interactionStats": {
    "totalSessions": 15,
    "toolUsageCount": {
      "calculateLoan": 20,
      "queryPolicy": 10
    },
    "lastInteractionTime": "2024-01-15"
  },
  "riskProfile": {
    "creditScore": 750,
    "isVip": true
  },
  "interestTags": ["å°å¾®ä¼ä¸šè´·æ¬¾", "ç½šæ¯å‡å…"]
}
```

**åº”ç”¨åœºæ™¯**ï¼š
- ä¸ªæ€§åŒ–æ¨èï¼ˆåŸºäºå†å²æŸ¥è¯¢ï¼‰
- é£é™©è¯„ä¼°ï¼ˆä¿¡ç”¨è¯„åˆ†ï¼‰
- æœåŠ¡ä¼˜å…ˆçº§ï¼ˆVIP å¿«é€Ÿé€šé“ï¼‰

---

### 7. MCP å·¥å…·æ ‡å‡†åŒ–

#### è®¾è®¡ç›®æ ‡

ç¬¦åˆ **Model Context Protocol (MCP)** æ ‡å‡†ï¼š
1. ç»Ÿä¸€çš„å·¥å…·æè¿°æ ¼å¼
2. å‚æ•°è‡ªåŠ¨éªŒè¯
3. æ’ä»¶åŒ–åŠ¨æ€åŠ è½½
4. å·¥å…·ä¾èµ–ç®¡ç†

#### å·¥å…·æ¥å£

```java
public interface McpTool<I, O> {
    ToolMetadata getMetadata();      // å·¥å…·å…ƒæ•°æ®
    ToolResult<O> execute(I input);  // æ‰§è¡Œå·¥å…·
    boolean validateInput(I input);  // éªŒè¯è¾“å…¥
}
```

#### å·¥å…·å…ƒæ•°æ®ï¼ˆJSON Schemaï¼‰

```java
{
  "name": "calculateLoan",
  "description": "è®¡ç®—è´·æ¬¾æœˆä¾›ã€æ€»åˆ©æ¯ç­‰ä¿¡æ¯",
  "category": "financial",
  "parameters": [
    {
      "name": "principal",
      "type": "number",
      "description": "è´·æ¬¾æœ¬é‡‘ï¼ˆå…ƒï¼‰",
      "required": true,
      "minimum": 1000,
      "maximum": 100000000
    },
    ...
  ],
  "cacheable": true,
  "async": false,
  "version": "1.0.0"
}
```

#### å·¥å…·æ³¨å†Œä¸­å¿ƒï¼ˆToolRegistryï¼‰

**åŠŸèƒ½**ï¼š
- âœ… å·¥å…·æ³¨å†Œä¸å‘ç°
- âœ… æŒ‰åç§°/åˆ†ç±»/æ ‡ç­¾æ£€ç´¢
- âœ… ä¾èµ–éªŒè¯
- âœ… è‡ªåŠ¨ç”Ÿæˆå·¥å…·ç›®å½•

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// æ³¨å†Œå·¥å…·
toolRegistry.registerTool(loanCalculatorTool);

// æŒ‰åˆ†ç±»è·å–å·¥å…·
List<String> financialTools = toolRegistry.getToolsByCategory("financial");

// æœç´¢å·¥å…·
List<ToolMetadata> tools = toolRegistry.searchTools("loan");

// ç”Ÿæˆ Markdown ç›®å½•
String catalog = toolRegistry.generateToolCatalog();
```

---

### 8. æ–­ç‚¹ç»­èŠ

#### æ ¸å¿ƒåŠŸèƒ½

1. **ä¼šè¯æš‚åœ**ï¼šä¿å­˜å®Œæ•´çŠ¶æ€å¿«ç…§
2. **ä¼šè¯æ¢å¤**ï¼šåŠ è½½å¿«ç…§å¹¶æ¢å¤ä¸Šä¸‹æ–‡
3. **æ™ºèƒ½è¿‡æœŸ**ï¼šè¶…è¿‡ 30 å¤©è‡ªåŠ¨æ¸…ç†
4. **è·¨è®¾å¤‡åŒæ­¥**ï¼šåŸºäº Redis å®ç°

#### å¿«ç…§å†…å®¹

```java
{
  "sessionId": "SESSION-xxx",
  "userId": "user001",
  "pausedAt": "2024-01-15T10:30:00",
  "memorySnapshot": {
    "shortTermMemory": [...]  // æœ€è¿‘ 20 æ¡æ¶ˆæ¯
  },
  "sessionStateSnapshot": "{...}",  // ä¼šè¯çŠ¶æ€
  "userProfileSnapshot": "{...}"    // ç”¨æˆ·ç”»åƒ
}
```

#### æ¢å¤æµç¨‹

```
1. åŠ è½½å¿«ç…§
    â†“
2. æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼ˆ> 30 å¤©ï¼‰
    â”œâ”€ å·²è¿‡æœŸ â†’ è¿”å›é”™è¯¯
    â””â”€ æœªè¿‡æœŸ â†“
3. æ¢å¤çŸ­æœŸè®°å¿†
    â†“
4. æ¢å¤ä¼šè¯çŠ¶æ€
    â†“
5. ç”Ÿæˆæ¢å¤æ‘˜è¦
    â†“
6. è¿”å›ç»™ç”¨æˆ·
```

**æ¢å¤æ‘˜è¦ç¤ºä¾‹**ï¼š
```
æ¬¢è¿å›æ¥ï¼

ä¸Šæ¬¡å¯¹è¯æ—¶é—´ï¼š2024-01-15 10:30

å†å²ä¼šè¯æ‘˜è¦ï¼š
- ä¼šè¯å¼€å§‹æ—¶é—´ï¼š2024-01-15 09:00
- æ¶ˆæ¯æ€»æ•°ï¼š15 æ¡
- ç”¨æˆ·å…³æ³¨çš„ä¸»é¢˜ï¼š
  * æˆ‘æƒ³äº†è§£è´·æ¬¾...
  * æœ‰å“ªäº›å°å¾®ä¼ä¸šæ”¿ç­–...

è¯·ç»§ç»­æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä¼šåŸºäºä¹‹å‰çš„å¯¹è¯ä¸Šä¸‹æ–‡ä¸ºæ‚¨æœåŠ¡ã€‚
```

---

### 9. å¤šçº§ç¼“å­˜ä¼˜åŒ–

#### L1 + L2 æ¶æ„

```
ç”¨æˆ·è¯·æ±‚
    â†“
1. æŸ¥è¯¢ L1 ç¼“å­˜ (Caffeine)
    â”œâ”€ å‘½ä¸­ â†’ è¿”å› (2ms) âœ…
    â””â”€ æœªå‘½ä¸­ â†“
2. æŸ¥è¯¢ L2 ç¼“å­˜ (Redis)
    â”œâ”€ å‘½ä¸­ â†’ å›å¡« L1 â†’ è¿”å› (10ms) âœ…
    â””â”€ æœªå‘½ä¸­ â†“
3. æ‰§è¡Œå®é™…æ“ä½œ (500ms)
    â†“
4. å†™å…¥ L1 å’Œ L2
    â†“
5. è¿”å›ç»“æœ
```

#### ç¼“å­˜åˆ†ç±»

| ç¼“å­˜ç±»å‹ | L1 | L2 | TTL | ç”¨é€” |
|---------|----|----|-----|------|
| **å·¥å…·ç»“æœ** | âœ… | âœ… | 10 åˆ†é’Ÿ | calculateLoan ç­‰ |
| **ä¼šè¯çŠ¶æ€** | âœ… | âœ… | 30 åˆ†é’Ÿ | SessionState |
| **ç”¨æˆ·ç”»åƒ** | âœ… | âœ… | æ°¸ä¹… | UserProfile |
| **AI åˆ†æ** | âœ… | âœ… | 30 åˆ†é’Ÿ | æƒ…æ„Ÿåˆ†æã€æ„å›¾è¯†åˆ« |
| **å‘é‡æ£€ç´¢** | âœ… | âŒ | 10 åˆ†é’Ÿ | RAG æ£€ç´¢ç»“æœ |

#### æ€§èƒ½æ•°æ®

| æ“ä½œ | æ— ç¼“å­˜ | L1 ç¼“å­˜ | L2 ç¼“å­˜ | æå‡ |
|------|--------|---------|---------|------|
| è´·æ¬¾è®¡ç®— | 500ms | **2ms** | 10ms | **250x** |
| å‘é‡æ£€ç´¢ | 100ms | **5ms** | 15ms | **20x** |
| ä¼šè¯çŠ¶æ€æŸ¥è¯¢ | 50ms | **1ms** | 8ms | **50x** |

---

### 10. å…¨é“¾è·¯ç›‘æ§

#### AOP åˆ‡é¢ç›‘æ§

**æ‹¦æˆªæ‰€æœ‰å·¥å…·è°ƒç”¨**ï¼š
```java
@Around("execution(public * com.aerofin.tools.*.*(..))")
public Object monitor(ProceedingJoinPoint jp) {
    // è®°å½•ï¼šå·¥å…·åç§°ã€å‚æ•°ã€ç»“æœã€è€—æ—¶
    // ä¿å­˜åˆ°æ•°æ®åº“ + ä¸ŠæŠ¥ Prometheus
}
```

#### Prometheus æŒ‡æ ‡

```prometheus
# å·¥å…·è°ƒç”¨æ€»æ¬¡æ•°
aerofin_tool_invocations_total{tool="calculateLoan",status="SUCCESS"} 1000

# å·¥å…·è°ƒç”¨è€—æ—¶ï¼ˆP95ï¼‰
aerofin_tool_execution_time_seconds{tool="calculateLoan",quantile="0.95"} 0.502

# ç¼“å­˜å‘½ä¸­æ¬¡æ•°
aerofin_tool_cache_hits_total{tool="calculateLoan"} 850

# ç¼“å­˜å‘½ä¸­ç‡
aerofin_tool_cache_hit_rate{tool="calculateLoan"} 0.85
```

#### æ•°æ®åº“æ—¥å¿—

```sql
-- æŸ¥çœ‹å·¥å…·è°ƒç”¨æ—¥å¿—
SELECT tool_name, AVG(execution_time_ms), COUNT(*)
FROM tool_invocation_logs
WHERE created_at > NOW() - INTERVAL 1 DAY
GROUP BY tool_name;

-- ç»Ÿè®¡ç¼“å­˜å‘½ä¸­ç‡
SELECT tool_name,
       SUM(CASE WHEN cache_hit = 1 THEN 1 ELSE 0 END) * 100.0 / COUNT(*) AS hit_rate
FROM tool_invocation_logs
GROUP BY tool_name;
```

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Java** | 21 | æœ€æ–° LTSï¼Œæ”¯æŒè™šæ‹Ÿçº¿ç¨‹ |
| **Spring Boot** | 3.4.1 | ä¼ä¸šçº§åº”ç”¨æ¡†æ¶ |
| **Spring AI** | 1.0.0-M4 | OpenAI é›†æˆï¼ŒFunction Calling |
| **Spring WebFlux** | - | å“åº”å¼ç¼–ç¨‹ï¼Œæ”¯æŒ SSE |

### æ•°æ®å­˜å‚¨

| ç»„ä»¶ | ç”¨é€” |
|------|------|
| **OceanBase / MySQL** | å…³ç³»å‹æ•°æ®ï¼ˆæ”¿ç­–ã€ä¼šè¯ã€æ—¥å¿—ï¼‰ |
| **Milvus** | å‘é‡æ•°æ®åº“ï¼ˆè¯­ä¹‰æ£€ç´¢ï¼‰ |
| **Redis** | L2 ç¼“å­˜ã€åˆ†å¸ƒå¼ä¼šè¯ï¼ˆå¯é€‰ï¼‰ |

### ç¼“å­˜ä¸å·¥å…·

| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| **Caffeine** | L1 é«˜æ€§èƒ½ç¼“å­˜ï¼ˆWindow TinyLFUï¼‰ |
| **Guava** | å¸ƒéš†è¿‡æ»¤å™¨ã€å·¥å…·ç±» |
| **Micrometer** | ç›‘æ§æŒ‡æ ‡ |
| **Prometheus** | æŒ‡æ ‡æ”¶é›†ä¸å¯è§†åŒ– |

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- âœ… JDK 21+
- âœ… Maven 3.9+
- âœ… MySQL 8.0+
- âœ… Milvus 2.4+
- âœ… Dockerï¼ˆå¯é€‰ï¼‰

### 1. å¯åŠ¨ä¾èµ–æœåŠ¡

```bash
# MySQL
docker run -d --name aero-fin-mysql -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=your_password \
  -e MYSQL_DATABASE=aero_fin mysql:8.0

# Milvus
docker run -d --name aero-fin-milvus -p 19530:19530 \
  -e ETCD_USE_EMBED=true \
  milvusdb/milvus:v2.4.1-lite

# Redisï¼ˆå¯é€‰ï¼Œåˆ†å¸ƒå¼éƒ¨ç½²éœ€è¦ï¼‰
docker run -d --name aero-fin-redis -p 6379:6379 redis:7
```

### 2. åˆå§‹åŒ–æ•°æ®åº“

```bash
mysql -h localhost -u root -p aero_fin < src/main/resources/schema.sql
```

### 3. é…ç½® OpenAI API

```bash
# æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
export OPENAI_API_KEY="sk-your-api-key-here"

# æ–¹å¼ 2ï¼šä¿®æ”¹ application.yml
spring:
  ai:
    openai:
      api-key: sk-your-api-key-here
```

### 4. å¯åŠ¨åº”ç”¨

```bash
# ç¼–è¯‘æ‰“åŒ…
mvn clean package -DskipTests

# è¿è¡Œ
java -jar target/aero-fin-1.0.0.jar

# æˆ–ç›´æ¥è¿è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼‰
mvn spring-boot:run
```

### 5. æµ‹è¯•

**è®¿é—®æµ‹è¯•é¡µé¢**ï¼š
```
http://localhost:8080/index.html
```

**æµ‹è¯• SSE æµå¼æ¥å£**ï¼š
```bash
curl -N "http://localhost:8080/api/chat/stream?message=ä½ å¥½"
```

---

## é¡¹ç›®ç»“æ„

```
aero-fin/
â”œâ”€â”€ src/main/java/com/aerofin/
â”‚   â”œâ”€â”€ config/                            # âš™ï¸ é…ç½®å±‚
â”‚   â”‚   â”œâ”€â”€ AeroFinProperties.java
â”‚   â”‚   â”œâ”€â”€ CacheConfig.java               # Caffeine + å¸ƒéš†è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ VectorStoreConfig.java         # Milvus é…ç½®
â”‚   â”‚   â”œâ”€â”€ ChatClientConfig.java          # Spring AI é…ç½®
â”‚   â”‚   â””â”€â”€ AgentSystemPrompts.java        # â­ Agentç³»ç»Ÿæç¤ºè¯
â”‚   â”œâ”€â”€ agent/                             # ğŸ¤– å¤šAgentåä½œæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ AgentRole.java                 # Agentè§’è‰²æšä¸¾
â”‚   â”‚   â”œâ”€â”€ AgentMessage.java              # Agenté€šä¿¡åè®®
â”‚   â”‚   â”œâ”€â”€ BaseAgent.java                 # AgentåŸºç±»ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰
â”‚   â”‚   â”œâ”€â”€ CoordinatorAgent.java          # ä¸­æ§Agent
â”‚   â”‚   â”œâ”€â”€ MultiAgentOrchestrator.java    # Agentç¼–æ’å™¨
â”‚   â”‚   â””â”€â”€ experts/                       # ä¸“å®¶Agents
â”‚   â”‚       â”œâ”€â”€ LoanExpertAgent.java       # è´·æ¬¾ä¸“å®¶
â”‚   â”‚       â”œâ”€â”€ PolicyExpertAgent.java     # æ”¿ç­–ä¸“å®¶
â”‚   â”‚       â”œâ”€â”€ RiskAssessmentAgent.java   # é£æ§ä¸“å®¶
â”‚   â”‚       â””â”€â”€ CustomerServiceAgent.java  # å®¢æœä¸“å®¶
â”‚   â”œâ”€â”€ memory/                            # ğŸ§  åˆ†å±‚è®°å¿†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ MemoryLayer.java               # ä¸‰å±‚è®°å¿†æšä¸¾
â”‚   â”‚   â”œâ”€â”€ MemoryUnit.java                # è®°å¿†å•å…ƒï¼ˆå«è¡°å‡ç®—æ³•ï¼‰
â”‚   â”‚   â””â”€â”€ LayeredMemoryManager.java      # è®°å¿†ç®¡ç†å™¨
â”‚   â”œâ”€â”€ state/                             # ğŸ“Š çŠ¶æ€ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ SessionState.java              # ä¼šè¯çŠ¶æ€ï¼ˆFSM + æ§½ä½å¡«å……ï¼‰
â”‚   â”‚   â””â”€â”€ UserProfile.java               # ç”¨æˆ·ç”»åƒ
â”‚   â”œâ”€â”€ mcp/                               # ğŸ› ï¸ MCP å·¥å…·æ ‡å‡†åŒ–
â”‚   â”‚   â”œâ”€â”€ McpTool.java                   # å·¥å…·æ¥å£
â”‚   â”‚   â”œâ”€â”€ ToolRegistry.java              # å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â”‚       â””â”€â”€ LoanCalculatorTool.java    # è´·æ¬¾è®¡ç®—å·¥å…·
â”‚   â”œâ”€â”€ cache/                             # âš¡ å¤šçº§ç¼“å­˜æ¨¡å—
â”‚   â”‚   â””â”€â”€ DistributedCacheManager.java   # L1 + L2 ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ model/                             # ğŸ“¦ æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ entity/                        # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ dto/                           # DTO
â”‚   â”‚   â””â”€â”€ vo/                            # VO
â”‚   â”œâ”€â”€ repository/                        # ğŸ—„ï¸ æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ PolicyRepository.java
â”‚   â”‚   â”œâ”€â”€ ConversationRepository.java
â”‚   â”‚   â””â”€â”€ WaiverApplicationRepository.java
â”‚   â”œâ”€â”€ service/                           # ğŸ’¼ ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ AeroFinAgentService.java       # â­ æ ¸å¿ƒ Agent
â”‚   â”‚   â”œâ”€â”€ ConversationService.java       # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ VectorSearchService.java       # å‘é‡æ£€ç´¢
â”‚   â”‚   â””â”€â”€ ResumeConversationService.java # æ–­ç‚¹ç»­èŠ
â”‚   â”œâ”€â”€ tools/                             # ğŸ› ï¸ åŸæœ‰å·¥å…·å±‚
â”‚   â”‚   â””â”€â”€ FinancialTools.java
â”‚   â”œâ”€â”€ aspect/                            # ğŸ” AOP ç›‘æ§
â”‚   â”‚   â””â”€â”€ ToolInvocationAspect.java
â”‚   â”œâ”€â”€ controller/                        # ğŸŒ æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ ChatController.java            # SSE æµå¼æ¥å£
â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”‚   â””â”€â”€ AeroFinApplication.java            # ğŸš€ å¯åŠ¨ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ schema.sql                         # æ•°æ®åº“ Schema
â”‚   â””â”€â”€ static/index.html                  # æµ‹è¯•é¡µé¢
â”œâ”€â”€ README.md                              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ QUICK_START.md                         # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”œâ”€â”€ INTERVIEW_GUIDE.md                     # é¢è¯•æŒ‡å—
â”œâ”€â”€ MULTI_AGENT_ARCHITECTURE.md            # â­ å¤šAgentåä½œæ¶æ„è¯´æ˜
â”œâ”€â”€ LAYERED_MEMORY_ARCHITECTURE.md         # åˆ†å±‚è®°å¿†æ¶æ„è¯´æ˜
â””â”€â”€ PROJECT_OVERVIEW.md                    # é¡¹ç›®æ•´ä½“æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

---

## é¢è¯•è¦ç‚¹

### 1. é¡¹ç›®ä»‹ç»ï¼ˆ3 åˆ†é’Ÿï¼‰

**è¯æœ¯æ¨¡æ¿**ï¼š
> "æˆ‘åšäº†ä¸€ä¸ªåŸºäº Spring AI å’Œ GPT-4 çš„é‡‘èä¿¡è´·æ™ºèƒ½å®¢æœç³»ç»Ÿã€‚æ ¸å¿ƒäº®ç‚¹æ˜¯å®ç°äº†**å¤šAgentåä½œæ¶æ„**ï¼ˆCoordinator + Expert æ¨¡å¼ï¼‰ã€**Prompt Engineering**ï¼ˆå¼ºçº¦æŸã€é˜²å¹»è§‰ã€å¼ºåˆ¶å·¥å…·è°ƒç”¨ï¼‰ã€**ä¸‰å±‚è®°å¿†æ¶æ„**ï¼ˆç±»ä¼¼äººç±»è®°å¿†æ¨¡å‹ï¼‰ã€**ReAct æ€ç»´é“¾**ã€**RAG å‘é‡æ£€ç´¢å¢å¼º**ç­‰ä¼ä¸šçº§ç‰¹æ€§ã€‚
>
> æ¶æ„ä¸Šé‡‡ç”¨ä¸­æ§è·¯ç”± + ä¸“å®¶Agentçš„æ¨¡å¼ï¼ŒåŒ…å«5ä¸ªä¸“ä¸šAgentï¼šè´·æ¬¾è®¡ç®—ä¸“å®¶ï¼ˆå¼ºåˆ¶å·¥å…·è°ƒç”¨ï¼‰ã€æ”¿ç­–æŸ¥è¯¢ä¸“å®¶ï¼ˆå¼ºåˆ¶RAGï¼‰ã€é£æ§è¯„ä¼°ä¸“å®¶ã€å®¢æœä¸“å®¶ï¼ˆSOPæµç¨‹ï¼‰å’Œæ™ºèƒ½è·¯ç”±ä¸­æ§ï¼Œå®ç°äº†å¤æ‚æ„å›¾çš„æ™ºèƒ½åˆ†è§£å’Œå¤šAgentåä½œå¤„ç†ã€‚
>
> æŠ€æœ¯ä¸Šä½¿ç”¨ Spring WebFlux çš„ SSE å®ç°æµå¼è¾“å‡ºï¼Œé€šè¿‡æ»‘åŠ¨çª—å£ç®—æ³•ç®¡ç†å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå¹¶è®¾è®¡äº† L1ï¼ˆCaffeineï¼‰+ L2ï¼ˆRedisï¼‰å¤šçº§ç¼“å­˜æ¶æ„ï¼Œå°†è´·æ¬¾è®¡ç®—çš„å“åº”æ—¶é—´ä» 500ms ä¼˜åŒ–åˆ° 2msã€‚
>
> é¡¹ç›®å®Œæ•´å®ç°äº†ä»æ¥å£å±‚åˆ°æ•°æ®å±‚çš„æ ‡å‡†åˆ†å±‚æ¶æ„ï¼Œå¹¶é›†æˆäº† AOP ç›‘æ§å’Œ Prometheus æŒ‡æ ‡ä¸ŠæŠ¥ã€‚"

### 2. æ ¸å¿ƒæŠ€æœ¯é—®ç­”

#### Q1: ä¸ºä»€ä¹ˆé‡‡ç”¨å¤šAgentåä½œæ¶æ„ï¼Ÿ

**ç­”**ï¼š
> "ä¼ ç»Ÿå•Agentæ–¹æ¡ˆå­˜åœ¨ä¸‰å¤§é—®é¢˜ï¼š
> 1. **è§’è‰²æ··ä¹±**ï¼šä¸€ä¸ªAgentæ—¢è¦æ‡‚æ”¿ç­–ï¼Œåˆè¦ä¼šè®¡ç®—ï¼Œè¿˜è¦åšé£æ§ï¼ŒèŒè´£ä¸æ¸…
> 2. **å¹»è§‰ä¸¥é‡**ï¼šæ”¿ç­–æŸ¥è¯¢æ—¶å®¹æ˜“è‡†é€ ï¼Œè´·æ¬¾è®¡ç®—æ—¶å¯èƒ½å¿ƒç®—å‡ºé”™
> 3. **éš¾ä»¥æ‰©å±•**ï¼šæ–°å¢ä¸šåŠ¡éœ€è¦ä¿®æ”¹æ ¸å¿ƒé€»è¾‘ï¼Œç»´æŠ¤æˆæœ¬é«˜
>
> æˆ‘ä»¬é‡‡ç”¨ Coordinator + Expert æ¨¡å¼ï¼Œé€šè¿‡ 5 ä¸ªä¸“ä¸šAgentåˆ†å·¥åä½œï¼š
> - **CoordinatorAgent**ï¼šæ™ºèƒ½è·¯ç”±ä¸­æ§ï¼Œè´Ÿè´£æ„å›¾è¯†åˆ«å’Œä»»åŠ¡åˆ†å‘
> - **LoanExpertAgent**ï¼šè´·æ¬¾è®¡ç®—ä¸“å®¶ï¼Œå¼ºåˆ¶è°ƒç”¨å·¥å…·ï¼ˆç¦æ­¢å¿ƒç®—ï¼‰
> - **PolicyExpertAgent**ï¼šæ”¿ç­–æŸ¥è¯¢ä¸“å®¶ï¼Œå¼ºåˆ¶RAGæ£€ç´¢ï¼ˆä¸¥ç¦å¹»è§‰ï¼‰
> - **RiskAssessmentAgent**ï¼šé£æ§è¯„ä¼°ä¸“å®¶ï¼Œå¤šç»´åº¦é£é™©åˆ†æ
> - **CustomerServiceAgent**ï¼šå®¢æœä¸“å®¶ï¼Œéµå¾ª5æ­¥SOPæ ‡å‡†æµç¨‹
>
> æ¯ä¸ªAgentæœ‰ç‹¬ç«‹çš„System Promptå’Œå·¥å…·é›†ï¼Œé€šè¿‡AgentMessageåè®®é€šä¿¡ï¼Œæ”¯æŒå•Agentå¤„ç†å’Œå¤šAgentåä½œä¸¤ç§æ¨¡å¼ã€‚"

#### Q2: Prompt Engineering å¦‚ä½•é˜²æ­¢å¹»è§‰ï¼Ÿ

**ç­”**ï¼š
> "æˆ‘ä»¬åœ¨ AgentSystemPrompts.java ä¸­è®¾è®¡äº†å¼ºçº¦æŸæœºåˆ¶ï¼š
> 1. **å¼ºåˆ¶å·¥å…·è°ƒç”¨**ï¼šCALCULATOR_PROMPT æ˜ç¡®ç¦æ­¢å¿ƒç®—ï¼Œå¿…é¡»è°ƒç”¨ calculateLoan å·¥å…·
> 2. **å¼ºåˆ¶RAGä¾èµ–**ï¼šPOLICY_RAG_PROMPT ä¸¥ç¦è‡†é€ ï¼Œæ‰€æœ‰å›ç­”å¿…é¡»åŸºäºæ£€ç´¢context
> 3. **å¼•ç”¨æº¯æº**ï¼šè¦æ±‚æ ‡æ³¨ä¿¡æ¯æ¥æºï¼Œå¦‚ `[ä¾æ®ï¼šæ”¿ç­–æ–‡æ¡£åç§° Vç‰ˆæœ¬å·]`
> 4. **å…œåº•æœºåˆ¶**ï¼šæ£€ç´¢ä¸ºç©ºæ—¶æ˜ç¡®å‘ŠçŸ¥'æœªæ‰¾åˆ°ç›¸å…³æ”¿ç­–'ï¼Œè€Œä¸æ˜¯ç¼–é€ ç­”æ¡ˆ
> 5. **SOPæ ‡å‡†æµç¨‹**ï¼šACTION_SOP_PROMPT å®šä¹‰5æ­¥æ ‡å‡†ä½œä¸šç¨‹åºï¼Œé˜²æ­¢æµç¨‹é—æ¼
>
> é€šè¿‡ CRITICAL æ ‡è®°å…³é”®çº¦æŸï¼Œç”¨ âœ…/âŒ æ£€æŸ¥æ¸…å•å¸®åŠ©æ¨¡å‹è‡ªæ£€ï¼Œæä¾›é”™è¯¯ç¤ºä¾‹å’Œæ­£ç¡®ç¤ºä¾‹è¿›è¡Œç¤ºä¾‹é©±åŠ¨å­¦ä¹ ã€‚"

#### Q3: ä¸ºä»€ä¹ˆè®¾è®¡ä¸‰å±‚è®°å¿†ï¼Ÿ

**ç­”**ï¼š
> "æˆ‘ä»¬å€Ÿé‰´äº† Atkinson-Shiffrin äººç±»è®°å¿†æ¨¡å‹ï¼Œè®¾è®¡äº†ä¸‰å±‚è®°å¿†æ¶æ„ï¼š
> - **çŸ­æœŸè®°å¿†**ï¼ˆWorking Memoryï¼‰ï¼šåªä¿ç•™æœ€è¿‘ 20 æ¡æ¶ˆæ¯ï¼Œé¿å…ä¸Šä¸‹æ–‡è¿‡é•¿ï¼Œç›´æ¥ä¼ ç»™ LLM
> - **ä¸­æœŸè®°å¿†**ï¼ˆSession Memoryï¼‰ï¼šä¿å­˜å®Œæ•´ä¼šè¯å†å²ï¼ˆ500 æ¡ï¼‰ï¼Œç”¨äºç”Ÿæˆæ‘˜è¦å’Œæ§½ä½å¡«å……
> - **é•¿æœŸè®°å¿†**ï¼ˆLong-term Memoryï¼‰ï¼šè·¨ä¼šè¯çš„ç”¨æˆ·ç”»åƒï¼ŒåŒ…å«åå¥½ã€é£é™©è¯„ä¼°ã€å†å²è¡Œä¸º
>
> æˆ‘ä»¬è¿˜å®ç°äº†åŸºäºé‡è¦æ€§çš„**è®°å¿†æå‡ç­–ç•¥**ï¼ˆè¯„åˆ† > 0.7 è‡ªåŠ¨æå‡ï¼‰å’Œ **Ebbinghaus é—å¿˜æ›²çº¿**ï¼ˆè®°å¿†éšæ—¶é—´è¡°å‡ï¼Œä½†è®¿é—®æ—¶é‡æ–°æ¿€æ´»ï¼‰ã€‚"

#### Q4: MCP å·¥å…·æ ‡å‡†åŒ–æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

**ç­”**ï¼š
> "MCP æ ‡å‡†åŒ–å¸¦æ¥ä¸‰å¤§ä¼˜åŠ¿ï¼š
> 1. **ç»Ÿä¸€å·¥å…·æè¿°**ï¼šç¬¦åˆ Model Context Protocolï¼ŒLLM èƒ½å‡†ç¡®ç†è§£å·¥å…·ç”¨é€”å’Œå‚æ•°
> 2. **å‚æ•°è‡ªåŠ¨éªŒè¯**ï¼šæ‰§è¡Œå‰æ ¡éªŒç±»å‹ã€èŒƒå›´ï¼Œé¿å…æ— æ•ˆè°ƒç”¨
> 3. **æ’ä»¶åŒ–æ¶æ„**ï¼šé€šè¿‡ ToolRegistry æ”¯æŒåŠ¨æ€åŠ è½½ï¼Œç±»ä¼¼ Spring Plugin
>
> æˆ‘ä»¬å®ç°äº†å·¥å…·æ³¨å†Œä¸­å¿ƒï¼Œæ”¯æŒæŒ‰åç§°ã€åˆ†ç±»ã€æ ‡ç­¾æ£€ç´¢ï¼Œè¿˜æä¾›ä¾èµ–éªŒè¯å’Œç‰ˆæœ¬ç®¡ç†ã€‚ç”Ÿäº§ç¯å¢ƒå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶åŠ¨æ€æ³¨å†Œå·¥å…·ã€‚"

#### Q5: å¤šçº§ç¼“å­˜å¦‚ä½•ä¿è¯ä¸€è‡´æ€§ï¼Ÿ

**ç­”**ï¼š
> "æˆ‘ä»¬é‡‡ç”¨**å†™ç©¿ï¼ˆWrite-throughï¼‰ç­–ç•¥**ï¼š
> - **å†™å…¥æ—¶**ï¼šåŒæ—¶æ›´æ–° L1ï¼ˆCaffeineï¼‰å’Œ L2ï¼ˆRedisï¼‰
> - **è¯»å–æ—¶**ï¼šå…ˆæŸ¥ L1 â†’ æœªå‘½ä¸­æŸ¥ L2 â†’ å›å¡« L1
> - **å¤±æ•ˆç­–ç•¥**ï¼šTTL + LRU ç»„åˆï¼ŒL1 è¿‡æœŸåæŸ¥ L2ï¼ŒL2 è¿‡æœŸåˆ™é‡æ–°è®¡ç®—
>
> å®æµ‹ç¼“å­˜å‘½ä¸­ç‡ 85%+ï¼Œè´·æ¬¾è®¡ç®—ä» 500ms é™åˆ° 2msï¼Œæå‡ 250 å€ã€‚"

#### Q6: æ–­ç‚¹ç»­èŠå¦‚ä½•å®ç°ï¼Ÿ

**ç­”**ï¼š
> "æ ¸å¿ƒæ˜¯**ä¼šè¯å¿«ç…§**æœºåˆ¶ï¼š
> 1. **æš‚åœæ—¶**ï¼šåºåˆ—åŒ–çŸ­æœŸè®°å¿†ã€ä¼šè¯çŠ¶æ€ã€ç”¨æˆ·ç”»åƒåˆ° Redisï¼ŒTTL 30 å¤©
> 2. **æ¢å¤æ—¶**ï¼šæ£€æŸ¥å¿«ç…§æ˜¯å¦è¿‡æœŸï¼Œååºåˆ—åŒ–çŠ¶æ€ï¼Œç”Ÿæˆæ¢å¤æ‘˜è¦
> 3. **è·¨è®¾å¤‡åŒæ­¥**ï¼šåŸºäº Redis å®ç°ï¼Œæ‰‹æœºç«¯æš‚åœï¼ŒPC ç«¯å¯æ¢å¤
>
> ç”¨æˆ·ä½“éªŒç±»ä¼¼ ChatGPT Web ç«¯ï¼Œå¯ä»¥éšæ—¶ä¸­æ–­å¯¹è¯ï¼Œç¨åç»§ç»­ã€‚"

### 3. æ€§èƒ½ä¼˜åŒ–

| ä¼˜åŒ–é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|--------|------|
| è´·æ¬¾è®¡ç®— | 500ms | 2ms | **250x** |
| å‘é‡æ£€ç´¢ | 100ms | 5ms | **20x** |
| ä¼šè¯çŠ¶æ€æŸ¥è¯¢ | 50ms | 1ms | **50x** |
| Token æ¶ˆè€— | 1500/æ¬¡ | 800/æ¬¡ | **-47%** |

### 4. å¯æ‰©å±•æ€§

**æ°´å¹³æ‰©å±•æ–¹æ¡ˆ**ï¼š
1. **ä¼šè¯å­˜å‚¨å¤–éƒ¨åŒ–**ï¼šCaffeine â†’ Redisï¼ˆæ”¯æŒå¤šå®ä¾‹å…±äº«ï¼‰
2. **æ— çŠ¶æ€è®¾è®¡**ï¼šController å’Œ Service å±‚æ— çŠ¶æ€ï¼Œå¯ç›´æ¥æ‰©å®¹
3. **æ•°æ®åº“è¯»å†™åˆ†ç¦»**ï¼šOceanBase ä¸»ä»æ¶æ„
4. **å‘é‡åº“é›†ç¾¤**ï¼šMilvus æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
5. **è´Ÿè½½å‡è¡¡**ï¼šNginx / K8s Ingress

---

## æ‰©å±•æ€§è®¾è®¡

### 1. æ–°å¢å·¥å…·

```java
// 1. å®ç° McpTool æ¥å£
@Component
@McpTool.Tool(name = "checkCreditScore", category = "financial")
public class CreditScoreTool implements McpTool<String, Integer> {
    @Override
    public ToolResult<Integer> execute(String userId) {
        // æŸ¥è¯¢å¾ä¿¡è¯„åˆ†
        Integer score = creditService.getScore(userId);
        return ToolResult.success(score, 100, false);
    }
}

// 2. è‡ªåŠ¨æ³¨å†Œï¼ˆSpring è‡ªåŠ¨æ‰«æï¼‰
// æˆ–æ‰‹åŠ¨æ³¨å†Œ
toolRegistry.registerTool(creditScoreTool);
```

### 2. åˆ‡æ¢å‘é‡åº“

```java
// ä» Milvus åˆ‡æ¢åˆ° Pinecone
@Bean
public VectorStore vectorStore() {
    return PineconeVectorStore.builder()
        .apiKey(apiKey)
        .environment(environment)
        .embeddingModel(embeddingModel)
        .build();
}
```

### 3. åˆ‡æ¢ LLM

```yaml
# ä» OpenAI åˆ‡æ¢åˆ° Azure OpenAI
spring:
  ai:
    azure:
      openai:
        api-key: ${AZURE_OPENAI_KEY}
        endpoint: https://your-resource.openai.azure.com/
```

---

## ğŸ“Š æ€»ç»“ï¼šé¡¹ç›®æ ¸å¿ƒä»·å€¼

| ç»´åº¦ | ä»·å€¼ |
|------|------|
| **æŠ€æœ¯æ·±åº¦** | ä¸‰å±‚è®°å¿† + ReAct + RAG + MCP + æ–­ç‚¹ç»­èŠ |
| **ä¸šåŠ¡ä»·å€¼** | é™ä½å®¢æœæˆæœ¬ 80%ï¼Œ7Ã—24 å°æ—¶æœåŠ¡ |
| **æ€§èƒ½ä¼˜åŒ–** | å¤šçº§ç¼“å­˜ + æ»‘åŠ¨çª—å£ï¼Œå“åº”æ—¶é—´ < 100ms |
| **å¯æ‰©å±•æ€§** | åˆ†å±‚æ¶æ„ + æ’ä»¶åŒ–è®¾è®¡ï¼Œæ˜“äºæ–°å¢åŠŸèƒ½ |
| **ç›‘æ§ä½“ç³»** | AOP + Prometheusï¼Œå…¨é“¾è·¯å¯è§‚æµ‹ |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **[README.md](README.md)** - é¡¹ç›®å¿«é€Ÿå¼€å§‹æŒ‡å—
2. **[INTERVIEW_GUIDE.md](INTERVIEW_GUIDE.md)** - é¢è¯•è¦ç‚¹è¯¦è§£
3. **[LAYERED_MEMORY_ARCHITECTURE.md](LAYERED_MEMORY_ARCHITECTURE.md)** - åˆ†å±‚è®°å¿†æ¶æ„æ·±åº¦è§£æ
4. **[QUICK_START.md](QUICK_START.md)** - 5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

---

## ğŸ‰ æ­å–œï¼

ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ª**ç”Ÿäº§çº§çš„ AI Agent ç³»ç»Ÿ**ï¼Œæ¶µç›–ï¼š
- âœ… æµå¼è¾“å‡ºã€ReActã€RAG
- âœ… ä¸‰å±‚è®°å¿†æ¶æ„ï¼ˆæ ¸å¿ƒåˆ›æ–°ï¼‰
- âœ… MCP å·¥å…·æ ‡å‡†åŒ–
- âœ… æ–­ç‚¹ç»­èŠåŠŸèƒ½
- âœ… å¤šçº§ç¼“å­˜ä¼˜åŒ–
- âœ… å…¨é“¾è·¯ç›‘æ§

**å®Œå…¨å¯ä»¥ä½œä¸ºé¢è¯•çš„æ ¸å¿ƒé¡¹ç›®å±•ç¤ºï¼** ğŸš€

æœ‰ä»»ä½•é—®é¢˜éšæ—¶é—®æˆ‘ï¼
